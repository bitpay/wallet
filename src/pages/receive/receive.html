<ion-header>
  <ion-navbar>
    <ion-title>{{'Receive'|translate}}</ion-title>
    <ion-buttons end>
      <button ion-button icon-only *ngIf="showShareButton" (click)="shareAddress()">
        <ion-icon ios="ios-share-outline" md="md-share"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content no-bounce>
  <div *ngIf="wallet && wallet.isComplete() && wallet.needsBackup" class="message-container">
    <div class="title">
      <span translate>Wallet not backed up</span>
    </div>
    <div class="subtitle">
      <span translate>Funds received to a wallet cannot be retrieved if the wallet is not backed up.</span>
      <a (click)="openWikiBackupNeeded()" translate>Learn more</a>
    </div>
    <button ion-button block clear (click)="goToBackup()" translate>Backup wallet</button>
  </div>

  <div *ngIf="wallet && wallet.isComplete() && !wallet.needsBackup" class="qr-container">
    <div *ngIf="loading" class="loading-address spinner">
      <ion-spinner></ion-spinner>
    </div>
    <ngx-qrcode *ngIf="!loading && address" copy-to-clipboard="{{ address }}" qrc-value="{{qrAddress}}" qrc-class="aclass" qrc-errorCorrectionLevel="M"></ngx-qrcode>
    <div *ngIf="!loading" class="text-address ellipsis" copy-to-clipboard="{{ address }}">
      <img *ngIf="wallet.coin == 'btc'" src="assets/img/icon-bitcoin.svg" alt="BTC" width="18" />
      <img *ngIf="wallet.coin == 'bch'" src="assets/img/bitcoin-cash-logo.svg" alt="BCH" width="22" /> {{ address }}
    </div>
    <div *ngIf="loading" class="text-address">...</div>
    <button ion-button clear [hidden]="!address" (click)="requestSpecificAmount()">
      <span translate>Request Specific amount</span>
      <ion-icon name="arrow-forward"></ion-icon>
    </button>
    <button ion-button clear small [hidden]="!address" (click)="setAddress(true)">
      <span translate>Generate new address</span>
    </button>
  </div>

  <div *ngIf="wallet && !wallet.isComplete()" class="message-container">
    <div class="title">
      <span translate>Incomplete wallet</span>
    </div>
    <div class="subtitle">
      <span translate>All signing devices must be added to this multisig wallet before bitcoin addresses can be created.</span>
    </div>
    <button ion-button block clear (click)="goCopayers()" translate>Open wallet</button>
  </div>

  <div *ngIf="!wallet" class="no-wallet-message">
    <span translate>No wallet</span>
  </div>
</ion-content>

<ion-footer>
  <div *ngIf="wallets[0]" class="wallets-container" (click)="showWallets()">
    <img src="assets/img/icon-wallet.svg" class="icon-wallet" [ngStyle]="{'background-color': wallet.color}" *ngIf="wallet.network == 'livenet'">
    <img src="assets/img/icon-wallet-testnet.svg" class="icon-wallet" [ngStyle]="{'background-color': wallet.color}" *ngIf="wallet.network == 'testnet'">
    <div class="wallet-text">
      {{wallet.name}}
      <span *ngIf="wallet.n > 1">
        {{wallet.m}}-of-{{wallet.n}}
      </span>
    </div>
  </div>
</ion-footer>